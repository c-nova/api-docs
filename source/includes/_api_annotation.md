# アノテーション（注釈）

<!--===================================================================-->
## 概要

アノテーションサービスはカメラやビデオについての付加情報データをイベントストリームに追加することを可能にします。

アノテーションはデバイスとタイムスタンプに関連付けられます。これらは保存期間を超えると消去されてしまうような、通常の保管ロジックの影響を受けます。

<!--===================================================================-->
## アノテーションの作成

> 要求 記述予定

```shell
```

> JSON応答 記述予定

```json
```

デバイス用のアノテーションは特定のタイムスタンプと、アノテーションを記載したデータと共に作成してください。

### HTTP要求

`PUT https://login.eagleeyenetworks.com/g/annotation`

パラメータ       | データ型式   	| 詳細       
---------       | ----------- 	| -----------
**device_id**   | 文字列      	| アノテーションと関連付けるデバイスIDを指定します
**timestamp**   | 文字列      	| アノテーションと関連付けるタイムスタンプをEENフォーマットで指定します
**data**   		| json   		| アノテーションと関連付けるデータをJSON形式で指定します。データフィールド上の事前定義は不要です。

### エラー状態コード

HTTP 状態コード    | データ型式   
------------------- | ----------- 
200	| 要求は成功しました
400	| 予期しないまたは認識できない属性が与えられました
401	| 無効なセッションクッキーによって許可されませんでした
403	| 必要な権限が足りないためユーザーは禁止されました

<!--===================================================================-->
## アノテーションの更新

> 要求 記述予定

```shell
```

> JSON応答 記述予定

```json
```

特定のタイムスタンプによってデバイスのアノテーションを更新します。単純な変更 ('atype'='mod') の場合にはアノテーションが作成された時の 'タイムスタンプ' を渡すこともできます。ゼロからNへの 'ハートビート'('atype'='hb') を変更する場合には、アノテーションに対して詳細な変更時間が必要になります。アノテーションは終了 ('atype'='end') させることができ、その場合には付加情報の添付ができます。それぞれのアノテーション イベントはイベントを拡張するハートビートが無くなるとその後10秒間継続していると仮定されます。ハートビートの後ろにはもう10秒続くことが仮定されます。アノテーションは終了イベント ('atype'='end') が指定されることにより、短縮することが可能になります。

### HTTP要求

`POST https://login.eagleeyenetworks.com/g/annotation`

パラメータ       | データ型式   	| 詳細         | 必須？
---------       | ----------- 	| -----------  | -----------
**id**   		| 文字列      	| 更新するアノテーションIDであり、PUT /annotation 時に返されます | true
**device_id**   | 文字列      	| 更新するアノテーションに関連付けられたデバイスID | true
**timestamp**   | 文字列      	| atype='mod' が指定される場合、アノテーション作成時のタイムスタンプを指定する必要があります。もし atype が 'hb' または 'end'の場合、このタイムスタンプはオリジナルと異なるタイムスタンプを指定する必要があります。 | true
**data**   		| json   		| 更新するアノテーションのデータをJSON形式で指定します。データフィールド上の事前定義は不要です。 | true
atype  			| 文字列, enum  | 更新するアノテーションの型式を指定します。デフォルトは 'mod' です。'mod' はアノテーションの単純な変更を行います。'hb' を指定した場合はハートビート イベントとなり、期間の変更または拡張のパラメータを情報として追加します。'end' が指定された場合は終了イベントとなり、この後には 'hb' が無いものとして受け付けられます。 <br><br>enum: end, hb, mod |

### エラー状態コード

HTTP 状態コード    | データ型式   
------------------- | ----------- 
200	| 要求は成功しました
400	| 予期しないまたは認識できない属性が与えられました
401	| 無効なセッションクッキーによって許可されませんでした
403	| 必要な権限が足りないためユーザーは禁止されました
